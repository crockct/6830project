<!DOCTYPE html>
<html lang="en">
	<head>
		<title>Database Plotter</title>
		<!-- CSS files -->
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css">
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap-theme.min.css">
		<link rel="stylesheet" href="styles.css" media="screen">
		<link rel="stylesheet" href="font-awesome.css">
		<!-- javascript scripts -->
		<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.4.1/d3.min.js"></script>
		<script src="server_communication.js"></script>
		<script src="chart.js"></script>
		<script src="cards.js"></script>
		<!--<script src="http://d3js.org/d3.v3.min.js"></script>
		script src="wordcloud.js"></script>-->
	</head>
	
	<body>
		<div class="db-file-form">
			<nav class="navbar navbar-default" role="navigation">
				<div class="container-fluid">
					<div class="navbar-header">
						<a class="navbar-brand" href="#">DB File Path</a>
					</div>
					<form class="navbar-form navbar-left">
						<div class="form-group">
							<input id="filepath" type="text" class="form-control" placeholder="enter db filepath" value="static/mimic2.db">
						</div>
						<button id="filepath-btn" class="btn btn-default">Submit</button>
					</form>
				</div>
			</nav>
		</div>
		
		<div id="main">
			<div class="left">
				<h3>Tables:</h3>
				<ol id="tables-list">
				</ol>
			</div> <!-- end left div -->
			<div id="middlediv" class="middle">
				
				<div class="container">
					<h1>Database Plotting Tool</h1>
					<p class="authors">Mukarram Tahir, Katherine Hobbs, Colleen Rock</p>
					<form>
						<div class="group">
							<input id="dbfile" type="text" required>
							<span class="highlight"></span>
							<span class="bar"></span>
							<label>Database File</label>
						</div>
					</form>
				</div>
				<div class="header" id="cardcontainer">
					<div class="container">
						<h3>Pie Chart</h3>
						<div id="flipper1" class="flipper flip">
							<div class="card">
								<div class="front">
									<div class="card-instructions" id="back-instructions">
										<span id="results-title-span" class="results-title"></span>
										<span class="edit-button"><i class="fa fa-terminal"></i></span>
									</div>
									<div class="pie-chart">
										<canvas id="myPieChart" width="520" height="260"></canvas>
									</div>
								</div>
								<div class="back">
									<div class="card-instructions" id="front-instructions">
										SQL Query
										<span id="execute-button" class="run-button" onclick="runQueryPieChart()"><i class="fa fa-line-chart"></i></span>
									</div>
									<textarea id="query" spellcheck="false">Enter a query...</textarea>
								</div>
							</div>
						</div>
					</div>
				</div>
				<div class="header">
					<div class="container">
						<h3>Word Cloud</h3>
						<div id="flipper2" class="flipper flip">
							<div class="card">
								<div class="front">
									<div class="card-instructions" id="back-instructions">
										<span id="results-title-span" class="results-title"></span>
										<span class="edit-button"><i class="fa fa-terminal"></i></span>
									</div>
									<div class="chart">
										<canvas id="myWordCloud" width="520" height="260"></canvas>
									</div>
								</div>
								<div class="back">
									<div class="card-instructions" id="front-instructions">
										SQL Query
										<span id="execute-button" class="run-button" onclick="runQueryWordCloud()"><i class="fa fa-line-chart"></i></span>
									</div>
									<textarea id="query">Enter a query...</textarea>
								</div>
							</div>
						</div>
					</div>
				</div>
				
				<div class="header">
					<div class="container">
						<h3>Histogram</h3>
						<div id="flipper3" class="flipper flip">
							<div class="card">
								<div class="front">
									<div class="card-instructions" id="back-instructions">
										<span id="results-title-span" class="results-title"></span>
										<span class="edit-button"><i class="fa fa-terminal"></i></span>
									</div>
									<div class="chart">
										<canvas id="myHistogram" width="520" height="260"></canvas>
									</div>
								</div>
								<div class="back">
									<div class="card-instructions" id="front-instructions">
										SQL Query
										<span id="execute-button" class="run-button" onclick="runQueryHistogram()"><i class="fa fa-line-chart"></i></span>
									</div>
									<textarea id="query">Enter a query...</textarea>
								</div>
							</div>
						</div>
					</div>
				</div>
				
				<div class="header">
					<div class="container">
						<h3>Example Query</h3>
						<p class="code">
						SELECT d_labitems.test_name,
						<br>d_labitems.itemid as e_itemid,
						<br>COUNT(labevents.itemid) AS NumberOfOccurences
						<br>FROM labevents
						<br>JOIN d_labitems
						<br>ON (labevents.itemid=d_labitems.itemid)
						<br>WHERE fluid='BLOOD'
						<br>GROUP BY d_labitems.test_name
						<br>ORDER BY NumberOfOccurences DESC
						<br>LIMIT 5
						</p>
						<p> A more bogus query that can be used to generate a pie chart is given below; the numerical field is just the item ID of the meditem, but ends up being used as the tally for the pie chart.</p>
						<p class="code">
						SELECT DISTINCT d_meditems.*
						<br>FROM d_meditems, medevents
						<br>JOIN d_patients ON medevents.subject_id=d_patients.subject_id WHERE d_meditems.itemid=medevents.itemid AND sex='F'
						<br>LIMIT 5
						</p>
					</div>
				</div>
				<div class="footer">
					<div class="container">
						<span class="created-by">Prototype created for <a href="http://db.csail.mit.edu/6.830">MIT 6.830 Database Systems</a></span>
					</div>
				</div>
				</div><!-- end of middle div -->
			<div class="right">
			<h3>Add card</h3>
			<span class="edit-button" id="add_pie" onclick="addPieChart()"><i class="fa fa-pie-chart"></i></span><br></br>
			<span class="edit-button" id="add_line" onclick="addLineChart()"><i class="fa fa-line-chart"></i></span><br></br>
			<span class="edit-button" id="add_bar" onclick="addBarChart()"><i class="fa fa-bar-chart"></i></span>
			</div> <!-- end of right div -->	
				</div><!-- end of main content div -->
				
			</body>
		</html>